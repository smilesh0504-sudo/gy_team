# Spendy: AI 페르소나 분석기 - 요구사항 정의서

이 문서는 'Spendy' 웹 애플리케이션의 기능적, 비기능적 요구사항을 정의하고 관리하기 위한 공식 문서입니다. 프로젝트의 현재 상태를 반영하며, 향후 업데이트의 기준점이 됩니다.

---

## 1. 개요

**Spendy**는 사용자의 소비 내역 데이터를 기반으로 AI(Google Gemini)를 활용하여 소비 패턴을 분석하고, 개인화된 '소비 페르소나'를 부여하는 지능형 المالية 분석 도구입니다. 사용자는 텍스트, 파일, 이미지 등 다양한 형태로 데이터를 손쉽게 업로드하여 자신의 소비 습관에 대한 재미있고 직관적인 통찰을 얻을 수 있습니다.

## 2. 기능 요구사항 (Functional Requirements)

### 2.1. 사용자 인증 (User Authentication)
-   **회원가입**:
    -   사용자는 닉네임과 비밀번호를 사용하여 계정을 생성할 수 있다.
    -   닉네임은 시스템 내에서 고유해야 하며, 중복될 수 없다.
    -   비밀번호는 **5~15자리의 영문과 숫자 조합**이어야 하는 정책을 따른다.
    -   비밀번호 정책에 맞지 않거나, 비밀번호 확인이 일치하지 않을 경우 실시간 오류 메시지를 표시한다.
-   **로그인**:
    -   가입된 닉네임과 비밀번호로 시스템에 접근할 수 있다.
    -   로그인 실패 시, '존재하지 않는 닉네임' 또는 '비밀번호 불일치'와 같은 명확한 사유를 안내한다.
-   **비밀번호 관리**:
    -   로그인 및 회원가입 화면에서 '눈 모양' 아이콘을 통해 비밀번호 보기/숨기기 기능을 제공한다.
-   **로그아웃**:
    -   사용자는 언제든지 안전하게 로그아웃할 수 있으며, 로그아웃 시 모든 세션 정보는 초기화된다.

### 2.2. 소비 데이터 입력 (Spending Data Input)
-   **파일 업로드**:
    -   사용자는 `CSV`, `Excel (.xlsx, .xls)`, `TXT` 형식의 파일을 업로드하여 대량의 소비 내역을 한 번에 입력할 수 있다.
-   **이미지 업로드**:
    -   **AI 기반 분석**: 사용자가 스마트폰으로 촬영한 영수증, 은행 앱 거래 내역 스크린샷 등 이미지 파일을 업로드할 수 있다.
    -   Gemini AI가 이미지를 분석하여 금융 관련 문서인지 판단하고, 지출 항목, 금액, 카테고리를 자동으로 추출한다.
    -   금융 관련 이미지가 아닐 경우, 경고 메시지를 표시하고 특별 페르소나('생각없는 직진가')를 부여하는 옵션을 제공한다.
-   **텍스트 직접 입력**:
    -   사용자는 텍스트 영역에 소비 내역을 직접 복사하여 붙여넣을 수 있다. (예: `스타벅스 4500`)

### 2.3. AI 기반 분석 및 시각화 (AI-Powered Analysis & Visualization)
-   **소비 페르소나 분석**:
    -   입력된 모든 데이터는 '식비', '쇼핑' 등 정의된 카테고리로 자동 재분류된다.
    -   가장 많은 금액을 지출한 카테고리를 기준으로 사용자에게 고유한 소비 페르소나(예: '미식가', '쇼핑 러버')를 부여한다.
-   **AI 아이콘 생성**:
    -   Gemini AI 이미지 생성 모델을 사용하여 각 페르소나와 카테고리에 맞는 귀여운 3D 클레이 스타일 아이콘을 동적으로 생성하여 시각적 경험을 향상시킨다.
-   **결과 페이지**:
    -   분석된 페르소나, 설명, AI 생성 코멘트를 담은 메인 카드를 표시한다.
    -   카테고리별 지출 금액과 전체 지출 대비 비율을 막대그래프로 시각화한다.
    -   '알 수 없는 소비' 항목을 필터링하여 볼 수 있는 토글 기능을 제공한다.
    -   분석에 사용된 전체 거래 내역 리스트를 제공한다.

### 2.4. 분석 세션 및 기록 관리 (Analysis Session & History Management)
-   **데이터 추가**:
    -   1차 분석 후, 결과 페이지에서 데이터를 추가하여 더 정교한 분석을 진행할 수 있다.
-   **분석 기록 저장**:
    -   완료된 분석 결과(페르소나, 분석 데이터, 거래 내역)는 사용자의 선택에 따라 로컬 브라우저에 저장된다.
-   **기록 조회 및 관리**:
    -   '내 정보' 탭에서 과거에 저장된 모든 분석 기록을 시간순으로 조회할 수 있다.
    -   저장된 기록을 다시 확인하거나 영구적으로 삭제할 수 있다.

### 2.5. 사용자 인터페이스 및 경험 (UI/UX)
-   **탭 기반 네비게이션**:
    -   앱의 핵심 기능인 '분석'과 '내 정보' 두 개의 탭으로 구성된 직관적인 하단 네비게이션을 제공한다.
-   **상태 피드백**:
    -   데이터 업로드, AI 분석, 로그인/회원가입 등 비동기 작업이 진행되는 동안 로딩 스피너를 표시하여 사용자에게 명확한 피드백을 제공한다.
-   **PWA (Progressive Web App)**:
    -   사용자는 모바일 홈 화면이나 데스크톱에 앱을 설치하여 네이티브 앱처럼 사용할 수 있다.
    -   서비스 워커를 통해 기본적인 오프라인 캐싱을 지원하여 앱 로딩 속도를 개선한다.

## 3. 비기능 요구사항 (Non-Functional Requirements)

-   **기술 스택**:
    -   **프론트엔드**: React, TypeScript, Tailwind CSS
    -   **AI**: Google Gemini API (`gemini-2.5-flash`, `gemini-2.5-flash-image`)
    -   **실행 환경**: 최신 웹 브라우저 (빌드 과정 없이 `importmap`을 통해 모듈 로드)
-   **백엔드**:
    -   **사용자 데이터**: SheetDB (Google Sheets 기반)를 사용하여 사용자 계정 정보를 영구적으로 저장하고 관리한다.
    -   **분석 기록 데이터**: 사용자의 개인 정보 보호와 빠른 접근성을 위해 브라우저의 `localStorage`를 사용한다.
-   **보안**:
    -   회원가입 시 프론트엔드뿐만 아니라 **서버 사이드(SheetDB 연동 로직)에서도 비밀번호 정책을 검증**하여 유효하지 않은 데이터가 데이터베이스에 저장되는 것을 원천 차단한다.
-   **버전 관리 및 문서화**:
    -   모든 사용자 요청사항과 그에 따른 변경 내역은 `CHANGELOG.md`에 버전별로 기록 및 관리한다.
    -   본 요구사항 정의서(`README.md`)는 기능 변경 시 함께 업데이트되어 항상 최신 상태를 유지한다.
-   **배포**:
    -   GitHub Actions를 통해 `main` 브랜치에 코드가 푸시될 때마다 GitHub Pages로 자동 배포된다.
